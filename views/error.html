<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Error</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="nav">
        <h1 id="header-title">DS Computer Institute</h1>
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/admin" id="adminLink" style="display:none;">Admin</a>
            <a href="/exam">Exam</a>
            <a href="/notes">Notes</a>
            <a href="/signup" id="signupLink">Signup</a>
            <a href="/login" id="loginLink">Login</a>
            <a href="/logout" id="logoutLink" style="display:none;">Logout</a>
            <a href="/profile" id="profileLink" style="display:none;"><img src="/profile.png" alt="Profile" width="25" /></a>
        </div>
        <button class="hamburger">â˜°</button>
    </div>
    <div class="center-container">
        <h1>500 - Server Error</h1>
        <p>Something went wrong on our end. Please try again later.</p>
        <a href="/">Go to Homepage</a>
    </div>
    <div class="footer">
        <p>&copy; 2025 DS Computer Institute. All rights reserved.</p>
    </div>
    <script>
        // Hamburger menu toggle
        const hamburger = document.querySelector(".hamburger");
        const navLinks = document.querySelector(".nav-links");
        hamburger.addEventListener("click", () => {
            navLinks.classList.toggle("active");
        });

        // Auth check & links visibility
        document.addEventListener("DOMContentLoaded", async () => {
            const loginLink = document.getElementById('loginLink');
            const signupLink = document.getElementById('signupLink');
            const logoutLink = document.getElementById('logoutLink');
            const profileLink = document.getElementById('profileLink');
            const adminLink = document.getElementById('adminLink');
            const headerTitle = document.getElementById('header-title');

            const pathname = window.location.pathname;
            if (pathname === '/' || pathname === '/exam' || pathname === '/notes') {
                headerTitle.textContent = 'DS Computer Institute';
            }

            try {
                const res = await fetch('/api/check-auth');
                const data = await res.json();

                if (data.loggedIn) {
                    loginLink.style.display = 'none';
                    signupLink.style.display = 'none';
                    logoutLink.style.display = 'inline-block';
                    profileLink.style.display = 'inline-block';

                    if (data.user.role === "admin") {
                        adminLink.style.display = 'inline-block';
                    }
                } else {
                    logoutLink.style.display = 'none';
                    profileLink.style.display = 'none';
                    adminLink.style.display = 'none';
                }
            } catch (err) {
                console.error('Auth check failed', err);
            }
        });
    </script>
</body>
</html>